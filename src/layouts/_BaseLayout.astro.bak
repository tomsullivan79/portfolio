---
/* One place to import global styles */
import "../styles/global.css";
const { title = "Site" } = Astro.props;
const pathname = Astro.url.pathname;
const isActive = (href) => (href === "/" ? pathname === "/" : pathname.startsWith(href));
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <slot name="head" />
    <style>
      /* Inline nav CSS so it can't go missing */
      .site-header{
        position:sticky; top:0; z-index:100;
        background: color-mix(in srgb, var(--panel) 92%, transparent);
        backdrop-filter: blur(8px);
        border-bottom:1px solid var(--border);
      }
      .site-nav{
        display:flex; align-items:center; justify-content:space-between; gap:12px;
        min-height:56px;
      }
      .brand{ font-weight:700; color:var(--text); text-decoration:none; }
      .brand:hover{ color:var(--brand); }
      .links{ display:flex; align-items:center; gap:18px; list-style:none; margin:0; padding:0; }
      .links a{ color:var(--text); text-decoration:none; padding:8px 6px; border-radius:8px; }
      .links a:hover{ color:var(--brand); }
      .links a.active{ color:var(--brand); font-weight:700; }
      .menu-toggle{
        display:none; background:var(--chip); border:1px solid var(--border);
        color:var(--text); padding:8px 10px; border-radius:10px; cursor:pointer;
      }
      @media (max-width:820px){
        .menu-toggle{ display:inline-flex; }
        .links{
          display:none; position:absolute; right:24px; top:56px;
          background:var(--panel); border:1px solid var(--border); border-radius:12px;
          padding:10px; box-shadow: var(--shadow); flex-direction:column; gap:8px;
        }
        .links.open{ display:flex; }
      }
      .wrap{ max-width:1180px; margin:0 auto; padding:24px; }
      .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
    </style>
  </head>
  <body>
    <header class="site-header">
      <nav class="site-nav wrap">
        <a class="brand" href="/">Tom Sullivan</a>
        <button class="menu-toggle" aria-controls="primary-nav" aria-expanded="false">
          <span class="sr-only">Toggle menu</span> â˜°
        </button>
        <ul id="primary-nav" class="links">
          <li><a class:list={{active:isActive("/")}} href="/">Home</a></li>
          <li><a class:list={{active:isActive("/projects")}} href="/projects">Projects</a></li>
          <li><a class:list={{active:isActive("/about")}} href="/about">About</a></li>
          <li><a class:list={{active:isActive("/#contact")}} href="/#contact">Contact</a></li>
        </ul>
      </nav>
    </header>

    <main class="wrap">
      <slot />
    </main>

    <script>
      (function(){
        const btn = document.querySelector('.menu-toggle');
        const list = document.getElementById('primary-nav');
        if(!btn || !list) return;
        btn.addEventListener('click', () => {
          const open = list.classList.toggle('open');
          btn.setAttribute('aria-expanded', open ? 'true' : 'false');
        });
      })();
    </script>
  </body>
</html>
